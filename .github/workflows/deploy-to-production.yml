name: Build and Deploy - Production
run-name: Deploy to ${{ inputs.runner }}
on:
  workflow_dispatch:
    inputs:
      runner:
        required: true
        type: choice
        description: Select the runner
        default: '1'
        options:
          - '1'
          - '2'      

jobs:
  test2:
    runs-on: ubuntu-latest
    steps:    
    - name: Get triggering user name
      id: triggered-by
      if: always()
      run: |
       

       
        #TRIGGERED_BY=$(curl -s -H "Authorization: Bearer ${{ secrets.GITHUB_TOKEN }}" https://api.github.com/users/${{ github.triggering_actor }} | jq -r '.name')

        #if [ "$TRIGGERED_BY" = "null" ]; then
          
          #TRIGGERED_BY=${{ github.triggering_actor }}
        #fi        

        TRIGGERED_BY=$(curl -s -H "Authorization: Bearer ${{ secrets.GITHUB_TOKEN }}" https://api.github.com/users/${{ github.triggering_actor }} | jq -r '.name') && [ "$TRIGGERED_BY" = "null" ] && TRIGGERED_BY=${{ github.triggering_actor }} && echo "TRIGGERED_BY=$TRIGGERED_BY" >> "$GITHUB_OUTPUT"
        #echo "TRIGGERED_BY=$TRIGGERED_BY" >> "$GITHUB_OUTPUT"
      
        
    - name: print triggered by
      run: 
        echo ${{ steps.triggered-by.outputs.TRIGGERED_BY }}
