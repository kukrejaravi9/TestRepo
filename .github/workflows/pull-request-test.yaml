name: Pull Request Workflow
on:
  pull_request:
    types:
      [opened, closed]
      
jobs:
  build:
    name: Build and Test
    runs-on: ubuntu-latest

    steps:
      - name: Checkout repository
        uses: actions/checkout@v2
     
      - name: print
        run: |
          echo "Pull Request Branch: ${{ github.base_ref }}"
          echo "Pull Request Branch: ${{ github.head_ref }}"
          
      - name: Extract version name from branch
        run: |
          if [ ${{ contains(github.base_ref, 'refs/heads/release-') }} = true ]; then
            SEPARATOR='refs/heads/release-' 
          elif [ ${{ contains(github.base_ref, 'refs/heads/hotfix-') }} = true ]; then
            SEPARATOR='refs/heads/hotfix-' 
          fi        
          echo "VERSION_NAME="${GITHUB_BASE_REF#"$SEPARATOR"}"" >> "$GITHUB_ENV"       
      
      - name: Print the version
        run: |
          echo ${{ env.VERSION_NAME }}
        
    if: startsWith(github.base_ref, 'release-') || startsWith(github.base_ref, 'hotfix-')   
